<!DOCTYPE html>
<html>
    <head>
        <title>Stu says boo!</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Lisa">
        <meta name="description" content="Console-based ascii art comic.">

        <style>
            :root {
                --bgCol: #333;
                --fCol: #fff;
                --errCol: yellow;
            }
            html, body {
                width: 100vw;
                margin: auto;;
                line-height: 1.5em;
                background-color: var(--bgCol);
                color: var(--fCol);
            }
            body {
                padding: 1em;
            }
            label, summary {
                color: var(--errCol);
            }
            * {
                box-sizing: border-box;
                font-family: "Courier New", "Courier New", monospace, monospace;
            }
            h1 {
                text-align: center;
            }
            section {
                margin-bottom: 2em;
            }
            textarea {
                width: 100%;
                resize: vertical;
                height: 5em;
                display: none;
                background-color: var(--bgCol);
                color: var(--fCol);
                line-height: 1em;
                text-align: center;
            }
            #output {
                height: 35em;
            }
        </style>
    </head>
    <body>
        <h1>Stu says boo!</h1>
        <details>
            <summary>Info</summary>
            <p><em>Stu says boo!</em> is a console-based ascii-art comic fueled by my nightmare. The story is about a killer rabbit and his author.</p>
        </details>
        <p>
            <label for='chp'>Chapter: </label>
            <select id='chp'>
                <option selected>Choose a story.</option>
            </select>
            <br>
            <label for='onpage'>On-page: </label><input type="checkbox" id='onpage' checked>
        </p>
        <section id='input'>
            <label>LouScript:</label><br>


            <textarea class='ljson' readonly disabled>{"META":{"TITLE":"Pushing carrots","AUTHOR":"Lou J. Son","VERSION":"2023-05-13","SUMMARY":"Stu, the rabbit is pushing up the carrots but eventually he realizes a solid ground to leave."},"SCENE":{"#cover":[["TEXTBOX","Pushing carrots"],["ASCII","               /\\ /\\        \n               \\/_\\/        \n               (o.O) cc     \n               / \" \\/       \n               ()~()        ",{"cc":"ü•ï"}],["SPEECH",[["author","Lou J. Son"]]]],"#01":[["TEXTBOX","Once upon a time and all at once, there is a rabbit."],["SPEECH",[["Stu","Boo!"]]],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (o.O)           \n            / \" \\           \n            ()~()           "]],"#02":[["TEXTBOX","Stu, the rabbit, lives in a rabbit hole. He is pushing up the carrots."],["ASCII","~~     ~~~~~~~~~~~~~cc~~~cc~\n {     }    /\\ /\\      cc  }\n {     } cc \\/_\\/ cc       }\n {         \\(o.O)/         }\n {          / \" \\          }\n {    cc    ()~()    cc    }\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~",{"cc":"ü•ï"}]],"#03":[["SPEECH",[["framer","The carrots just don't thrive this fall. What a lazy bunny I have there."]]],["ASCII","                    ___     \n                  _/___\\_   \n                   (._.)    \n                    / \\     \n                    | |     \n~~     ~~~~~~~~~~~~~cc~~~cc~\n {     }    /\\ /\\          }\n {     } cc \\/_\\/ cc       }",{"cc":"ü•ï"}]],"#04":[["TEXTBOX","Stu overhears the farmer's grumbling with his big rabbit ears."],["SPEECH",[["Stu","Lazy me?"]]],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (T.T)           \n            / \" \\cc         \n            ()~()           ",{"cc":"ü•ï"}]],"#05":[["TEXTBOX","Stu works so hard that the carrots literally shoot out of the patch."],["SPEECH",[["farmer","WTF?!"]]],["ASCII","                    ___     \n        cc    cc  _/___\\_   \n                   (._.)    \n         cc         / \\  cc \n             cc   cc| |     \n~~     ~~~~~~~~~~~~~cc~~~cc~\n {     }    /\\ /\\      cc  }\n {     } cc \\/_\\/ cc       }\n {         \\(o.O)/         }\n {          / \" \\          }\n {    cc    ()~()    cc    }\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~",{"cc":"ü•ï"}]],"#06":[["TEXTBOX","One of the carrots comes out very wrong..."],["ASCII","                    ___     \n                  _/___\\_   \n                   (x-x)    \n                    / \\     \n                  cc| |     ",{"cc":"ü•ï"}]],"#07":[["TEXTBOX","The flying carrot leads to an immediate death."],["ASCII","                    ___     \n                  _/___\\_   \n                   (x-x)    \n                    /cc_    \n                    | |     ",{"cc":"ü•ï"}]],"#08":[["TEXTBOX","Luckily, Stu has a rabbit hole for the farmer."],["SPEECH",[["Stu","Boo?"]]],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (o.O)           \n   ___      / \" \\           \n _/___\\_    ()~()           \n~~     ~~~~~~~~~~~~~cc~~~cc~\n {     }                   }\n {     }                   }\n { \\ |                     }\n {__cc__                   }\n {(x-x)                    }\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~",{"cc":"ü•ï"}]],"#09":[["TEXTBOX","Standing by his uninhabitable rabbit hole and eating a carrot -- that is when Stu finally realizes the true purpose of his existence:"],["SPEECH",[["Stu","Friends?"]]],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (o.O)           \n   ___      / \" \\cc         \n _/___\\_    ()~()           \n~~     ~~~~~~~~~~~~~~~~~~cc~",{"cc":"ü•ï"}]]}}</textarea>

            <textarea class='ljson' readonly disabled>{"META":{"TITLE":"Roadkill","AUTHOR":"Lou J. Son","VERSION":"2023-05-17","SUMMARY":"Stu is on the open road -- nothing can stop him."},"SCENE":{"#cover":[["TEXTBOX","Roadkill"],["ASCII","               /\\ /\\        \n               \\/_\\/        \n               (o.O)        \n               / \" \\zz      \n               ()~()        ",{"zz":"üì±"}],["SPEECH",[["author","Lou J. Son"]]]],"#00":[["TEXTBOX","Stu is lost in thought."],["THOUGHT",[["Stu","Where friends? Where?"]]],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (o.O)           \n   ___      / \" \\cc         \n _/___\\_    ()~()           \n~~     ~~~~~~~~~~~~~cc~~~cc~",{"cc":"ü•ï"}]],"#01":[["TEXTBOX","He pulls out the phone that he borrowed from a farmer."],["ASCII","               /\\ /\\        \n               \\/_\\/        \n               (o.O)        \n               / \" \\zz      \n               ()~()        ",{"zz":"üì±"}]],"#02":[["ASCII","   ______________________   \n  |                      |  \n  |        CCC    CCCC   |  \n  |    CCC C      C      |  \n  |    C   CCC    CCCC   |  \n  |    CCC               |  \n  |                      |  \n  |    Click      Chirp  |  \n  |    Clock             |  \n  |                      |  \n  |                      |  \n  |      I        NN N   |  \n  |      I        N NN   |  \n  |      I        N  N   |  \n  |                      |  \n  |    Insta      Nose   |  \n  |    graf       Book   |  \n  |                      |  \n  |                      |  \n  |   U U TTT            |  \n  |   U U  T             |  \n  |   UUU  T             |  \n  |                      |  \n  |   U-Tube             |  \n  |______________________|  "],["THOUGHT",[["Stu","So many friends..."]]]],"#03":[["TEXTBOX","A post grabs his attention."],["ASCII","   ______________________   \n  |  __________________  |  \n  |  |                |  |  \n  |  |                |  |  \n  |  |    (8)         |  |  \n  |  |   (888)        |  |  \n  |  |  8(^.^)8       |  |  \n  |  |  gg/ \\pp       |  |  \n  |  |    | |         |  |  \n  |  |_____________<3_|  |  \n  |                      |  \n  |  > Hey, there! It's  |  \n  |    bunny time!       |  \n  |    The new Stu book  |  \n  |    is available      |  \n  |    starting from     |  \n  |    Friday, 13th!     |  \n  |    Meet me at the    |  \n  |    mall for books    |  \n  |    and autographs!   |  \n  |                      |  \n  | #killerbunny #lou    |  \n  | #mall #meetandgreet  |  \n  | #rabbit #stusaysboo  |  \n  |______________________|  ",{"gg":"üìï","pp":"üñäÔ∏è"}]],"#04":[["TEXTBOX","And he works out a plan."],["ASCII","   ______________________   \n  |                      |  \n  |   o                  |  \n  |   | here             |  \n  |   >>>>>>>v           |  \n  |          v>>>>>>>>v  |  \n  |                   v  |  \n  |                   v  |  \n  |      v<<<<<<<<<<<<v  |  \n  |      v               |  \n  |      v               |  \n  |      v               |  \n  |      v               |  \n  |      v               |  \n  |      v>>>>>>>>v      |  \n  |               v>v    |  \n  |                 v    |  \n  |          v<<<<<<v    |  \n  | v<<<<<<<<v           |  \n  | v                    |  \n  | v                    |  \n  | v o              N   |  \n  | v>| there       W E  |  \n  |                  S   |  \n  |______________________|  "]],"#05":[["TEXTBOX","Now nothing can stop Stu from accomplishing his purpose..."],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (o.O)           \n            / \" \\zz         \n            ()~()           ",{"zz":"üì±"}]],"#06":[["TEXTBOX","...except for every vehicle on the road that he is walking on."],["ASCII"," /--------\\                 \n/ /------\\ \\                \n /________\\ \\_____          \n                  |         \n                  | /\\ /\\   \n                  | \\/_\\/   \n __      __       | (o.O)   \n/  \\----/  \\______/ / \" \\zz \n\\__/    \\__/        ()~()   ",{"zz":"üì±"}]],"#07":[["TEXTBOX","Phew, that was a close call!"],["SPEECH",[["Driver","Get off the road, furball! Don't you know the traffic code?"]]],["ASCII","                 /--------\\ \n                / /------\\ \\\n            ___/ /________\\ \n           |                \n /\\ /\\     |                \n \\/ \\/     |                \n (o.O)     |     __      __ \n / \" \\zz    \\___/  \\----/  \\\n ()~()          \\__/    \\__/",{"zz":"üì±"}]],"#08":[["TEXTBOX","Stu doesn't know the traffic code."],["THOUGHT",[["Stu","???"]]],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (o.O)           \n            / \" \\zz         \n            ()~()           ",{"zz":"üì±"}]],"#09":[["SPEECH",[["GuyWithPhone","OMG, look at that stupid bunny! It will look so frigging awesome when a truck runs over it. I need to film that for my channel."],["Stu","Traffic code? You know?"]]],["ASCII","                  /\\ /\\     \n eeee             \\/_\\/     \n(@>@)             (o.O)     \n / \\zz            / \" \\zz   \n | |              ()~()     ",{"zz":"üì±"}]],"#10":[["SPEECH",[["GuyWithPhone","What?"],["Stu","Good code? Traffic code?"],["GuyWithPhone","What ya saying?"]]],["ASCII","                  /\\ /\\     \n eeee             \\/_\\/     \n(@>@)             (o.O)     \n / \\zz            / \" \\zz   \n | |              ()~()     ",{"zz":"üì±"}]],"#11":[["TEXTBOX","The traffic is loud and noisy. Stu is hardly audible. The guy with the phone approaches."],["SPEECH",[["GuyWithPhone","What?"]]],["ASCII","                  /\\ /\\     \n          eeee    \\/_\\/     \n         (@>@)    (o.O)     \n          / \\zz   / \" \\zz   \n          | |     ()~()     ",{"zz":"üì±"}]],"#12":[["TEXTBOX","A truck approaches."],["SPEECH",[["GuyWithPhone","What?"],["Stu","Good code?"]]],["ASCII","       |                    \n       |                    \n       |                    \n___    |             /\\ /\\  \n   \\   |     eeee    \\/_\\/  \n    \\__|    (@>@)    (o.O)  \n    /        / \\zz   / \" \\zz\n___/         | |     ()~()  ",{"zz":"üì±"}]],"#13":[["TEXTBOX","The truck passes and suddenly, the guy is gone."],["SPEECH",[["Stu","Boo?"]]],["ASCII","                    |       \n                    |       \n                    |       \n   /\\ /\\            |    ___\n   \\/_\\/            |   /   \n   (o.O)            |__/    \n   / \" \\zz             \\    \n   ()~()      __zz__    \\___",{"zz":"üì±"}]],"#14":[["TEXTBOX","Stu keeps his phone in case he comes back."],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (o.O)           \n          zz/ \" \\zz         \n            ()~()           ",{"zz":"üì±"}]]}}</textarea>
            

            <textarea class='ljson' readonly disabled>{"META":{"TITLE":"Korrect Killing","AUTHOR":"Lou J. Son","VERSION":"2023-05-18","SUMMARY":"Stu makes a correction on an essay."},"SCENE":{"#cover":[["TEXTBOX","Korrect Killing"],["ASCII","               /\\ /\\        \n               \\/_\\/        \n               (o.O)        \n               / \" \\zzz     \n               ()~()        ",{"zzz":"üñçÔ∏è"}],["SPEECH",[["author","Lou J. Son"]]]],"#00":[["TEXTBOX","Stu gets to a beautifully wrecked building and decides to take a lesson."],["ASCII","                          | \n   _____________          | \n  |             |         | \n  |   SC_OOL    |         | \n  |_____________|         | \n                          | \n     _________            | \n    |    |    |    ____   | \n    |    |    |   |    |  | \n    |    |    |   |____|  | \n    |____|____|_          | \n    | |_________|_        | \n____|___|_________|_______| "]],"#01":[["TEXTBOX","Stu climbs through an open window."],["ASCII","        _____________       \n       |             |      \n       |    /\\ /\\    |      \n       |    \\/_\\/    |      \n       |    (   )    |      \n       |___\\/   \\/___|      \n            | @ |           \n            (/ \\)           \n                            \n                            "]],"#02":[["TEXTBOX","It is like entering a different world of dusty sponges."],["ASCII","                            \n                            \n                            \n                            \n  ~~~~~~~~~~~~              \n | ¬∞  o    ¬∞  |             \n |  ¬∞    ¬∞  o |             \n__~~~~~~~~~~~~______________"]],"#03":[["TEXTBOX","And clocks that stand still at 5 minutes to noon."],["ASCII","       _____________        \n      /             \\       \n     /    \\          \\      \n    /      \\ |        \\     \n    |       \\|        |     \n    |        o        |     \n    |                 |     \n     \\               /      \n      \\_____________/       "]],"#04":[["TEXTBOX","And lavatory paper massacres and no soap."],["ASCII","                            \n                  ______    \n                 |      |   \n         |       |      |   \n         |##|    |      |   \n          ## ###_|______|   \n           ###|         |   \n               \\        /   \n  ##   #####    \\____  /    \n___######_#####____|   |____"]],"#05":[["TEXTBOX","Stu is thrilled by all these horrors."],["THOUGHT",[["Stu","Wow!"]]],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (@.@)           \n            / \" \\           \n            ()~()           "]],"#06":[["TEXTBOX","He realizes that this could be a great place to find friends."],["THOUGHT",[["Stu","Friends!"]]],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (^.^)           \n            / \" \\           \n            ()~()           "]],"#07":[["TEXTBOX","But it is Friday afternoon and he just finds lots of empty halls and empty classrooms."],["ASCII","       |   ____      ____   \n       |  |    |    |    |  \n       |  |    |    |    |  \n       |  |    |    |    |  \n    /| |__|____|____|____|  \n   / | /                    \n  /  |/                     \n  |  /                      \n  | /                       \n  |/                        \n  /                         \n /                          \n/                           "]],"#08":[["TEXTBOX","Then Stu finds room 406."],["ASCII","          ________________  \n         |                | \n         |                | \n         |       /\\       | \n         |   ___/__\\___   | \n ______  |  |          |  | \n| Room | |  | DETENT-  |  | \n|  406 | |  | TION     |  | \n|______| |  |__________|  | \n         |                | \n         |                | \n         |                | \n         |                | \n_________|________________|_"]],"#09":[["TEXTBOX","He tears the door open and stares into the dangerous eyes of a teenager that just woke up from her afternoon nap."],["SPEECH",[["Student","_What_?!"],["Stu","Boo!"]]],["ASCII","                   ()~()    \n                   (-.-)    \n                ____/ | |   \n    /\\ /\\       |   /_|_|   \n    \\/_\\/       |  /|  |    \n    (   )                   \n    /   \\                   \n    | @ |                   "]],"#10":[["SPEECH",[["Stu","Am Stu! Friends?"]]],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (√í.√í)    \n         (^.^)  ____/ | |   \n         / \" \\  |   /_|_|   \n         ()~()  |  /|  |    "]],"#11":[["SPEECH",[["Stu","Am Stu! Friends?"],["Student","Are you stupid? What the heck are you anyways?"],["Stu","Friend!"]]],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (√í.√í)    \n         (^.^)  ____/ | |   \n         / \" \\  |   /_|_|   \n         ()~()  |  /|  |    "]],"#12":[["TEXTBOX","He takes out the two smartphones that he has borrowed and shows her his plan: Maybe she would like to go to the mall with him?"],["SPEECH",[["Stu","Look!"]]],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (√í.√í)    \n         (^.^)  ____/ | |   \n       zz/ \" \\zz|   /_|_|   \n         ()~()  |  /|  |    ",{"zz":"üì±"}]],"#13":[["ASCII","   ______________________   \n  |  __________________  |  \n  |  |                |  |  \n  |  |                |  |  \n  |  |    (8)         |  |  \n  |  |   (888)        |  |  \n  |  |  8(^.^)8       |  |  \n  |  |  bb/ \\pp       |  |  \n  |  |    | |         |  |  \n  |  |_____________<3_|  |  \n  |                      |  \n  |  > Hey, there! It's  |  \n  |    bunny time!       |  \n  |    The new Stu book  |  \n  |    is available      |  \n  |    starting from     |  \n  |    Friday, 13th!     |  \n  |    Meet me at the    |  \n  |    mall for books    |  \n  |    and autographs!   |  \n  |                      |  \n  | #killerbunny #lou    |  \n  | #mall #meetandgreet  |  \n  | #rabbit #stusaysboo  |  \n  |______________________|  "]],"#14":[["SPEECH",[["Student","I'm not getting anywhere because these stupid teachers want me write a stupid 3-pages essay because I tried to flush those stupid middle school girls down the closet."],["Stu","Boo?"]]],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (-.-)    \n         (o.O)  ____/ | |   \n       zz/ \" \\zz|   /_|_|   \n         ()~()  |  /|  |    ",{"zz":"üì±"}]],"#15":[["SPEECH",[["Student","Hehe, one of the wore glasses and the other one had nicer shoes than me."],["Stu","Boo?"],["Student","Yeah, well they just shouldn't use the restroom if they don't want to get flushed down the closet..."]]],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (-.-)    \n         (o.O)  ____/ | |   \n       zz/ \" \\zz|   /_|_|   \n         ()~()  |  /|  |    ",{"zz":"üì±"}]],"#16":[["SPEECH",[["Student","And you better back off if you don't want me to the same with you, stupid!"],["Stu","No friends?"]]],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (√í.√í)    \n         (o.O)  ____/ | |   \n       zz/ \" \\zz|   /_|_|   \n         ()~()  |  /|  |    ",{"zz":"üì±"}]],"#17":[["TEXTBOX","Suddenly, she notices the phone that Stu had borrowed from the guy on the road."],["SPEECH",[["Student","No f... Waaait, is that the new die-phone that you have there?"]]],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (@.@)    \n         (o.O)  ____/ | |   \n       zz/ \" \\zz|   /_|_|   \n         ()~()  |  /|  |    ",{"zz":"üì±"}]],"#18":[["SPEECH",[["Student","Okay, but as a friend, you have to do my essay for me. In the meantime, I hold your die-phone for you."]]],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (@.@)    \n         (o.O)  __zz/ | |   \n         / \" \\zz|   /_|_|   \n         ()~()  |  /|  |    ",{"zz":"üì±"}]],"#19":[["TEXTBOX","Stu is excited to have found a friend that he can go to the mall with. He just has to finish an essay, then they are ready to go!"],["SPEECH",[["Stu","Friend!"]]],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (@.@)    \n         (*.*)  __zz/ | |   \n         / \" \\zz|   /_|_|   \n         ()~()  |  /|  |    ",{"zz":"üì±"}]],"#20":[["TEXTBOX","Unfortunately, his new friend has not made it past 3 sentences yet."],["ASCII","  ________________________  \n |                        | \n | ESSAY                  | \n | -----                  | \n | I sHaLl NoT gEt CaUgHt | \n | FlUsHiNg StUdEnTs DoWn | \n | ThE cLoSeT bEcAuSe I   | \n | wIlL gEt DeTeNtIoN.    | \n | Blabla. Bla.           | \n |                        | \n |                        | "]],"#21":[["TEXTBOX","So Stu gets a pencil and starts by reworking the introduction."],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (√í.√í)    \n         (o.O)  __zz/ | |   \n      ppp/ \" \\zz|   /_|_|   \n         ()~()  |  /|  |    ",{"zz":"üì±","ppp":"üñçÔ∏è"}]],"#22":[["TEXTBOX","He crosses out the not-so-persuasive parts."],["ASCII","  ________________________  \n |                        | \n | ESSAY       /          | \n | ----- \\    /  \\    /   | \n | I sHaLl\\No/ gEt\\Ca/gHt | \n | FlUsHiNg\\/tUdEnT\\/DoWn | \n | ThE cLoS/\\ bEcAu/\\ I   | \n | wIlL gE/ D\\TeNt/oN\\    | \n | Blabla/ Bla\\  /    \\   | \n |      /      \\          | \n |              \\         | "]],"#23":[["SPEECH",[["Student","Hey! What are you doing there?"],["Stu","Help."],["Student","Give me that pencil, pronto!"]]],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (√í.√í)    \n         (o.O)  __zz/ | |   \n      ppp/ \" \\zz|   /_|_|   \n         ()~()  |  /|  |    ",{"zz":"üì±","ppp":"üñçÔ∏è"}]],"#24":[["TEXTBOX","Unexpectedly, she throws the die-phone at Stu..."],["ASCII","       zz  --               \n               \\            \n                            \n         /\\ /\\   \\ ()~()    \n         \\/_\\/     (√í.√í)    \n         (o.O)  ____/ | |   \n      ppp/ \" \\zz|   /_|_|   \n         ()~()  |  /|  |    ",{"zz":"üì±","ppp":"üñçÔ∏è"}]],"#25":[["TEXTBOX","With shock, the pencil slips right out of Stu's paw."],["ASCII","                            \n                            \n             --  ppp        \n         --                 \n     --                     \n                            \n                            ",{"ppp":"üñçÔ∏è"}]],"#26":[["SPEECH",[["Stu","Boo?"]]],["ASCII","         /\\ /\\     ()~()    \n         \\/_\\/     (x.x)    \n         (o.O)  ___ppp| |   \n         / \" \\zz|   /_|_|   \n zz      ()~()  |  /|  |    ",{"zz":"üì±","ppp":"üñçÔ∏è"}]],"#27":[["TEXTBOX","This die-phone is very robust."],["ASCII","   /\\ /\\           ()~()    \n   \\/_\\/           (x.x)    \n   (o.O)        ___ppp| |   \n zz/ \" \\zz      |   /_|_|   \n   ()~()        |  /|  |    ",{"zz":"üì±","ppp":"üñçÔ∏è"}]]}}</textarea>
            
            
            <textarea class='ljson' readonly disabled>{"META":{"TITLE":"Washed-Up Life","AUTHOR":"Lou J. Son","VERSION":"2023-06-02","SUMMARY":"Stu does laundry."},"SCENE":{"#cover":[["TEXTBOX","Washed-Up Life"],["ASCII","               /\\ /\\        \n               \\/_\\/        \n               (o.O)        \n               / \" \\zz      \n               ()~()        ",{"zz":"üêá"}],["SPEECH",[["author","Lou J. Son"]]]],"#00":[["TEXTBOX","Going downtown, Stu is about to lose hope. None of his friends ever seems to last."],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (o.O)           \n          zz/ \" \\zz         \n            ()~()           ",{"zz":"üì±"}]],"#01":[["TEXTBOX","But a new chance opens up right in front of him."],["ASCII","  SUPER LAUNDRY        |    \n__   ______   _______  |    \n  | |      | |       | |    \n  | |      | |       | |    \n__| |      | |_______| |    \n____|______|___________|    "]],"#02":[["TEXTBOX","Through the shop windows, he spots lots of boxes with doors."],["THOUGHT",[["Stu","Fancy rabbit holes!"]]],["ASCII","    ____________________    \n    |  _____     ____  |    \n    | |_____|   |____| |    \n    | |_____|          |    \n    |                  |    \n    |                  |    \n    |      ______      |    \n    |     / ____ \\     |    \n    |    / /    \\ \\    |    \n    |    | |    | |    |    \n    |    \\ \\____/ /    |    \n    |     \\______/     |    \n    |__________________|    "]],"#03":[["TEXTBOX","He thinks of his cozy rabbit hole that he left and it cuts him to the heart. But he has a mission and there is no way back."],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (o.O)           \n          zz/ \" \\zz         \n            ()~()           ",{"zz":"üì±"}]],"#04":[["TEXTBOX","Time to look ahead and into a new abyss."],["SPEECH",[["Stu","Boo? Hello?"]]],["ASCII","    ____________________    \n    |  _____     ____  |    \n    | |_____|   |____| |    \n    | |_____|          |    \n    |                  |    \n    |                  |    \n ___|__    ______      |    \n/      \\  / /\\ /\\\\     |    \n        \\/  \\/_\\/ \\    |    \n         |  (   ) |    |    \n        /\\ _/   \\_/    |    \n\\______/  \\_| @ |/     |    \n    |_______(/_\\)______|    "]],"#05":[["TEXTBOX","It is not as nice as his former apartment but it appears to be quite modern."],["ASCII","    ____________________    \n    |  _____     ____  |    \n    | |_____|   |____| |    \n    | |_____|          |    \n    |                  |    \n    |                  |    \n ___|__    ______      |    \n/      \\  //\\ /\\ \\     |    \n        \\/ \\/_\\/  \\    |    \n         | (o.O)  |    |    \n        /\\ / \" \\  /    |    \n\\______/  \\()~()_/     |    \n    |__________________|    "]],"#06":[["TEXTBOX","One can pay the rent directly to the apartment!"],["ASCII","               ________     \n              |        |    \n              | INSERT |    \n              | COINS  |    \n              | ONLY!  |    \n              |________|    \n    ____________________    \n    |  _____     ____  |    \n    | |_____|   |____| |    \n    | |_____|          |    \n    |                  |    "]],"#07":[["TEXTBOX","Stu approaches a ma'am to change some money."],["SPEECH",[["Stu","Ma'am, boo?"],["Ma'am","Huh? What do you want?"]]],["ASCII","        /\\ /\\               \n        \\/_\\/       %%%%%   \n        (o.O)      %(-_-)%  \n        / \" \\      % / \\bb  \n        ()~()        | |    ",{"bb":"üëú"}]],"#08":[["TEXTBOX","Stu points at one of the washing machines in the back."],["SPEECH",[["Ma'am","What's with that?"],["Stu","One for me?"],["Ma'am","The machine? You can't do laundry, you're a rabbit."],["Stu","Change money, please!"],["Ma'am","No, I'm busy. I don't have time to talk to rabbits anyways."],["Stu","Busy?"],["Ma'am","I don't talk to rabbits, I told you!"]]],["ASCII","        /\\ /\\               \n        \\/_\\/       %%%%%   \n        (o.O)      %(-_-)%  \n        / \" \\/     % / \\bb  \n        ()~()        | |    ",{"bb":"üëú"}]],"#09":[["TEXTBOX","Stu takes another look at the machine: Maybe there is a way to pay with banknotes despite the sign? He throws some notes through the door."],["ASCII","    ____________________    \n    |  _____     ____  |    \n    | |_____|   |____| |    \n    | |_____|          |    \n    |                  |    \n    |                  |    \n ___|__    ______      |    \n/      \\  /      \\     |    \n        \\//\\ /\\   \\    |    \n         |\\/_\\/   |    |    \n        /\\(   ) nn/    |    \n\\______/  /   \\/_/     |    \n    |_____()@()________|    ",{"nn":"üí∏"}]],"#10":[["TEXTBOX","Nothing happens."],["ASCII","    ____________________    \n    |  _____     ____  |    \n    | |_____|   |____| |    \n    | |_____|          |    \n    |                  |    \n    |                  |    \n ___|__    ______      |    \n/      \\  /      \\     |    \n        \\//\\ /\\   \\    |    \n         |\\/_\\/   |    |    \n        /\\(   )   /    |    \n\\______/  /   \\__/     |    \n    |_____()@()________|    ",{"nn":"üí∏"}]],"#11":[["TEXTBOX","Then something happens."],["SPEECH",[["Ma'am","Wow, how much money was that???"],["Stu","All."]]],["ASCII","    ____________________    \n    |  _____     ____  |    \n    | |_____|   |____| |    \n    | |_____|          |    \n    |                  |    \n    |                  |    \n ___|__    ______      |    \n/      \\  /      \\     |    \n        \\//\\ /\\   \\    |    \n         |\\/_\\/   |  %%%%%  \n        /\\(   )   / %(   )% \n\\______/  /   \\__/  bb/ \\ % \n    |_____()@()_______| |   ",{"bb":"üëú"}]],"#12":[["TEXTBOX","Stu spots a shiny piece on the floor."],["ASCII","    ____________________    \n    |  _____     ____  |    \n    | |_____|   |____| |    \n    | |_____|          |    \n    |                  |    \n    |                  |    \n ___|__    ______      |    \n/      \\  /      \\     |    \n        \\//\\ /\\   \\    |    \n         |\\/_\\/   |  %%%%%  \n        /\\(o.O)   / %($.$)% \n\\______/  / \" \\__/  % / \\bb \n  cc|_____()~()_______| |   ",{"bb":"üëú","cc":"ü™ô"}]],"#13":[["TEXTBOX","It is a coin!"],["SPEECH",[["Ma'am","So many banknotes!"]]],["ASCII","    ____________________    \n    |  _____     ____  |    \n    | |_____|   |____| |    \n    | |_____|          |    \n    |                  |    \n    |                  |    \n ___|__    ______      |    \n/      \\  /      \\     |    \n  /\\ /\\ \\/        \\    |    \n  \\/_\\/  |  %%%%% |    |    \n  (o.O) /\\ %(   )%/    |    \ncc/ \" \\/  \\%_/ \\_%     |    \n  ()~()______|_|_______|    ",{"bb":"üëú","cc":"ü™ô"}]],"#14":[["TEXTBOX","Happily, he slams the door and climbs to the coin slot."],["ASCII","    ____________________    \n    |  _____     ____  |    \n    | |_____/\\ /\\____| |    \n    | |_____\\/_\\/      |    \n    |       (   ) cc   |    \n    |       /   \\/     |    \n    |      _()@()      |    \n    |     / ____ \\     |    \n    |    / /    \\ \\    |    \n    |    | |    | |    |    \n    |    \\ \\____/ /    |    \n    |     \\______/     |    \n    |__________________|    ",{"cc":"ü™ô"}]],"#15":[["TEXTBOX","The machine tells Stu to wait for more than 3 hours... Where has the ma'am gone? Stu feels lost."],["ASCII","    ____________________    \n    |  _____     ____  |    \n    | |_____|   |3:03| |    \n    | |_____|          |    \n    |                  |    \n    |                  |    \n    |      ______      |    \n    |     / ____ \\     |    \n    |    / /%%%%\\ \\   /\\ /\\ \n    |    | |(x-x| |   \\/_\\/ \n    |    \\ \\_/_\\/ /   (o.O) \n    |     \\______/    / \" \\ \n    |_________________()~() "]],"#16":[["TEXTBOX","And found."],["ASCII","                            \n        ________________    \n       |                |   \n       |  LOST & FOUND  |   \n       \\________________/   "]],"#17":[["TEXTBOX","The box is full of nice things."],["THOUGHT",[["Stu","Booo!"]]],["ASCII","  /\\ /\\                     \n  \\/_\\/   ________________  \n  (o.O)  |                | \n  / \" \\  |  LOST & FOUND  | \n  ()~()  \\________________/ "]],"#18":[["ASCII","  /\\ /\\                     \n  \\/_\\/   ________________  \n  (o.O)  |                | \n  / \" \\ii|  LOST & FOUND  | \n  ()~()  \\________________/ ",{"ii":"üß¶"}]],"#19":[["ASCII","  /\\ /\\                     \n  \\/_\\/   ________________  \n  (o.O)  |                | \n  / \" \\ii|  LOST & FOUND  | \n  ()~()  \\________________/ ",{"ii":"üçå"}]],"#20":[["ASCII","  /\\ /\\                     \n  \\/_\\/   ________________  \n  (o.O)  |                | \n  / \" \\ii|  LOST & FOUND  | \n  ()~()  \\________________/ ",{"ii":"üêá"}]],"#21":[["TEXTBOX","Stu cannot decide what he likes better: The saw or the plush bunny. But when one finds a thing, he must lose another."],["ASCII","  /\\ /\\                     \n  \\/_\\/   ________________  \n  (o.O)  |                | \njj/ \" \\ii|  LOST & FOUND  | \n  ()~()  \\________________/ ",{"ii":"üêá","jj":"ü™ö"}]],"#22":[["TEXTBOX","His rabbit brain works flat out."],["THOUGHT",[["Stu","Saw or bunny? Bunny or saw?"]]],["ASCII","  /\\ /\\                     \n  \\/_\\/   ________________  \n  (o.O)  |                | \nii/ \" \\jj|  LOST & FOUND  | \n  ()~()  \\________________/ ",{"ii":"üêá","jj":"ü™ö"}]],"#23":[["TEXTBOX","But the die-phone that Stu has borrowed from someone is a good phone. Very robust, worth a saw plus a bunny. He could leave it here for that guy to find..."],["THOUGHT",[["Stu","Saw _and_ bunny!"]]],["ASCII","  /\\ /\\                     \n  \\/_\\/   ________zz______  \n  (o.O)  |                | \nii/ \" \\jj|  LOST & FOUND  | \n  ()~()  \\________________/ ",{"ii":"üêá","jj":"ü™ö","zz":"üì±"}]],"#24":[["TEXTBOX","He is pleased with his find."],["SPEECH",[["Stu","Plushie, you're Blu now!"]]],["ASCII","            /\\ /\\           \n            \\/_\\/           \n            (o.O)           \n          jj/ \" \\ii         \n            ()~()           ",{"ii":"üêá","jj":"ü™ö"}]]}}</textarea>
            
            
            <textarea class='ljson' readonly disabled>{"META":{"TITLE":"Who is Stu?","AUTHOR":"Lou J. Son","VERSION":"2023-05-12","SUMMARY":"A console-based ascii art comment about a killer bunny. The author Lou J. Son promotes her new horror comic but suddenly her main character comes alive."},"SCENE":{"#00cover":[["TEXTBOX","Who is Stu?"],["ASCII","               /\\ /\\        \n               \\/_\\/        \n     Stu says b(o.O)!zz     \n               / \" \\/       \n               ()~()        ",{"zz":"ü´Ä"}],["SPEECH",[["author","Lou J. Son"]]]],"#00dedication":[["TEXTBOX","Dedication"],["SPEECH",[["dedication","To D.S. who made me fall in love with ascii art and monster rabbits."],["dedication","To R.W. who introduced me to Stu."],["dedication","To N./A. who likes horror."],["dedication","To BF. who for age rating."]]]],"#01":[["TEXTBOX","Friday night, 13th. A queue at the mall."],["ASCII","  o     o         o  o      \n /|\\ o /|\\ o   o /|\\/|\\     \n / \\/|\\/ \\/|\\ /|\\/ \\/ \\   o \n    / \\   / \\ / \\      o /|\\\n                      /|\\/ \\\n     o        o       / \\ o \n    /|\\ o  o /|\\ o  o  o /|\\\n  o / \\/|\\/|\\/ \\/|\\/|\\/|\\/ \\\n /|\\   / \\/ \\   / \\/ \\/ \\   \n / \\ o             o        \n    /|\\  o  o   o /|\\       \n    / \\ /|\\/|\\ /|\\/ \\ o  o  \n        / \\/ \\ / \\   /|\\/|\\ \n                     / \\/ \\ "]],"#02":[["ASCII","    / \\ /|\\/|\\ /|\\/ \\ o  o  \n        / \\/ \\ / \\   /|\\/|\\ \n                     / \\/ \\ "],["SPEECH",[["teen1","Look at that queue! Get a life, guys!"],["teen2","Hehe, yeah get a --"]]],["ASCII","                888         \n    vvv        (   )        \n   (~_~)      )(o_o)(       \n    / \\         / \\         \n    | |         | |         "]],"#03":[["SPEECH",[["teen2","OMG. It's _her_!!!"],["teen1","It's who? Like, a popstar? An actress? U-Tube? Instagraf?"],["teen2","Lou J. Son! She's my hero!"],["teen1","Lou who? Never heard of her..."]]],["ASCII","                888         \n    vvv        (   )        \n   (?_?)      )(@_@)(       \n    / \\         / \\         \n    | |         | |         "]],"#04":[["SPEECH",[["teen2","_Lou Son_! The author of the 'Stu says boo!' comics!"]]],["ASCII"," +       *         *   +    \n     +      888             \n  *        (   )  +     *   \n      *   )(^o^)(           \n            / \\        +    \n  *    +    | |     *       "]],"#05":[["SPEECH",[["teen1","You mean the one who writes those silly wannabe horror series about a rabbit?"],["teen2","Lou!"],["teen1","And _Stu_ is the rabbit? And the plot is always like, he kills like everybody?"],["teen2","Ahhh!"]]],["ASCII","                888         \n    vvv        (   )        \n   (o_P)      )(^o^)(       \n    / \\         / \\         \n    | |         | |         "]],"#06":[["SPEECH",[["teen1","Oh, crap. Like, what a crappy crap..."],["teen2","I **must** get an autograph!"],["teen1","Whatever... Wait, what??? But that queue! Like, come on!!!"]]],["ASCII","                888         \n    vvv        (   )        \n   (~_~)      )(^o^)(       \n    / \\         / \\         \n    | |         | |         "]],"#07":[["TEXTBOX","At the mall, the famous comic artist Lou J. Son promotes her new book."],["SPEECH",[["Lou","After the success of the first comics, I was thinking: _How can I ever keep up with that?_"]]],["ASCII","          _______________   \n         |               |  \n         | Stu says boo! |  \n         |               |  \n         |     /\\ /\\     |  \n         |  xx \\/_\\/zz   |  \n   (8)   |    \\(o.O)/    |  \n  (888)  |     / \" \\     |  \n 8(o_o)8 |     ()~()     |  \n   / \\_  |_______________|  \n   | |    |             |   ",{"xx":"ü™ö","zz":"ü´Ä"}]],"#08":[["SPEECH",[["Lou","It was an awful lot of work. But now I'm back with a new book and I proudly --"]]],["ASCII","             (8)            \n            (888)           \n           8(o_o)8          \n             / \\_           \n             | |            "]],"#09":[["TEXTBOX","All of a sudden, all the lights go out."],["ASCII","                            \n                            \n                            \n                            \n                            \n                            \n                            \n                            \n                            \n                            "]],"#10":[["TEXTBOX","A pair of blazing eyes flashes up in the dark."],["ASCII","                            \n                            \n                            \n                            \n                            \n              o O           \n                            \n                            \n                            \n                            "]],"#11":[["TEXTBOX","The emergency power generator jumps on and someone screams out:"],["SPEECH",[["so","It's Stu!"]]],["ASCII","             /\\ /\\          \n             \\/_\\/          \n             (o.O)          \n             / \" \\          \n             ()~()          "]],"#12":[["SPEECH",[["Stu","Boo!"]]],["ASCII","             /\\ /\\          \n             \\/_\\/          \n             (o.O)          \n             / \" \\          \n             ()~()          "]],"#13":[["TEXTBOX","Panic breaks loose. All of a sudden, Stu holds a saw in his paw."],["ASCII","       \\o/                  \n \\o/    |              \\o/  \n  |    / \\   /\\ /\\      |   \n / \\\\o/   xx \\/_\\/     / \\  \n     |      \\(o.O)/         \n    / \\ \\o/  / \" \\  \\o/  \\o/\n         |   ()~()   |    | \n  \\o/   / \\         / \\  / \\\n   |                        \n  / \\ \\o/           \\o/  \\o/\n       |             |    | \n      / \\           / \\  / \\",{"xx":"ü™ö"}],["SPEECH",[["so1","Aaaahh!"],["so2","He's come to kill us all!"],["so3","Help!"]]]],"#14":[["TEXTBOX","Running away but mostly for the sake of the plot, someone falls right onto Stu's saw blade."],["ASCII","        _\\o                 \n         /   /\\ /\\          \n        /\\xx \\/_\\/          \n            \\(o.O)/         \n             / \" \\          \n             ()~()          ",{"xx":"ü™ö"}]],"#15":[["TEXTBOX","As the saw pierces the heart, blood splashes all over the place."],["ASCII","                  #######   \n                ##########  \n              ############# \n              ############# \n                ##########  \n                  #######   \n    ##        ##            \n   ####      #####          \n  ######    ########        \n ########   ##########      \n ########   ###########     \n##########   ###########    \n##########    ##########    \n##########     ########     \n ########       ######      \n  ######                    "]],"#16":[["TEXTBOX","Eventually, there is dead silence."],["SPEECH",[["Stu","Boo?"]]],["ASCII","                            \n            /\\ /\\           \n         xx \\/_\\/ zz        \n           \\(o.O)/          \n            / \" \\           \n            ()~()           ",{"xx":"ü™ö","zz":"ü´Ä"}]],"#17":[["TEXTBOX","Everyone is dead or gone."],["SPEECH",[["Stu","Hello?"]]],["ASCII","                            \n            /\\ /\\           \n         xx \\/_\\/ zz        \n           \\(o.O)/          \n            / \" \\           \n            ()~()           ",{"xx":"ü™ö","zz":"ü´Ä"}]],"#18":[["TEXTBOX","Stu is left behind, alone with a heart in his paw."],["SPEECH",[["Stu","Boo? Friends? Anybody?"]]],["ASCII","                            \n            /\\ /\\           \n         xx \\/_\\/ zz        \n           \\(o.O)/          \n            / \" \\           \n            ()~()           ",{"xx":"ü™ö","zz":"ü´Ä"}]]}}</textarea>
            
            
            <!-- <textarea class='ljson' readonly disabled></textarea> -->
            <!-- <textarea class='ljson' readonly disabled></textarea> -->
            <!-- <textarea class='ljson' readonly disabled></textarea> -->


        </section>
        <section>
            <label>Console:</label><br>
            <textarea readonly id='output'></textarea>
        </section>

        <script>

            function chunkText(text, maxlength) {
                /* Split string into chunk of max. length
                */
                const chunkRegex = new RegExp('.{1,' + maxlength + '}(?:\\s|$)', 'g');
                text = text.match(chunkRegex);
                text = text.map(s => s.trim());
                return text;
            }
            function hangingIndent(textArr, pre='> ') {
                const preLen = pre.length;
                textArr.forEach((val, idx) => {
                    if (idx == 0) textArr[idx] = `${pre}${val}`;
                    else textArr[idx] = `${' '.repeat(preLen)}${val}`;
                });
                return textArr;
            }
            function alignStrings(textArr, lineWidth) {
                textArr.forEach((val, idx) => {
                    if (val.length < lineWidth) textArr[idx] = `${val}${' '.repeat(lineWidth - val.length)}`;
                })
                return textArr;
            }

            function prepareScene(scene, defaultWidth=28) {

                // find max. col ascii image to determine scene width
                let w = [];
                for (const section of scene) {
                    if (section[0] == 'ASCII') {
                        const nrows = section[1].split('\n').length;
                        const ncols = (section[1].length - nrows + 1) / nrows;
                        w.push(ncols);
                    }
                }
                w = w.length > 0 ? Math.max(...w) : defaultWidth;
                const emptySpace = ' '.repeat(w);

                // create section arrays
                const sceneArr = [];
                for (let sidx=0; sidx < scene.length; sidx++) {
                    const [sType, sContent, sOther] = scene[sidx];
                    let names, n, indent = 4, isNotFirst = false;
                    switch(sType) {
                        case 'TEXTBOX':
                            const chunks = chunkText(sContent, w);
                            sceneArr.push([sType, alignStrings(chunks, w)]);
                            break;
                        case 'ASCII':
                            //console.log(sContent, sOther)
                            const nrows = sContent.split('\n').length;
                            const ncols = (sContent.length - nrows + 1) / nrows;
                            let ascii = sContent.split('\n');
                            if (ncols != w)  {
                                ascii = alignStrings(chunkText(ascii, w), w);
                            }
                            if (typeof sOther !== 'undefined') {
                                for (const key in sOther) {
                                    ascii.forEach((val, idx) => {
                                        ascii[idx] = val.replaceAll(key, sOther[key]);
                                    });
                                }
                            }
                            if (sidx != 0) ascii.unshift(emptySpace);
                            sceneArr.push([sType, ascii]);
                            break;
                        case 'SPEECH':
                            // determine number of speakers
                            names = sContent.map(val => val[0]);
                            n = new Set(names).size;
                            for (const sp of sContent) {
                                let [name, text] = sp;
                                const nameIdx = names.indexOf(name);
                                const ind = (w-n*indent) < 7 ? 7: (w-n*indent);
                                text = chunkText(text, ind);
                                text = hangingIndent(text, `${' '.repeat(nameIdx*indent)}> `);
                                text = alignStrings(text, w);
                                if (isNotFirst || (sidx>=1 && scene.length > 1)) text.unshift(emptySpace);
                                sceneArr.push([sType, text]);
                                isNotFirst = true;
                            }
                            break;
                        case 'THOUGHT':
                            // determine number of thinkers
                            names = sContent.map(val => val[0]);
                            n = new Set(names).size;
                            for (const sp of sContent) {
                                let [name, text] = sp;
                                const nameIdx = names.indexOf(name);
                                const ind = (w-n*indent) < 7 ? 7: (w-n*indent);
                                text = chunkText(text, ind);
                                text = hangingIndent(text, `${' '.repeat(nameIdx*indent)}* `);
                                text = alignStrings(text, w);
                                if (isNotFirst || (sidx>=1 && scene.length > 1)) text.unshift(emptySpace);
                                sceneArr.push([sType, text]);
                                isNotFirst = true;
                            }
                            break;
                    }
                }
                return {"width": w, "section": sceneArr};
            }

            function makePanel(scene) {
                // preprare scene
                const sceneObj = prepareScene(scene);
                const w = sceneObj.width;
                const section = sceneObj.section;
                

                // assemble panel
                let panel = '';
                for (let idx = 0; idx < section.length; idx++) {
                    let [sType, sContent] = section[idx];
                    sContent.forEach((val, idx) => {
                        sContent[idx] = `| ${val} |`;
                    });
                    let topBorder = '', bottomBorder = '';

                    // top border?
                    if (idx == 0 || sType == 'TEXTBOX') {
                        // top-border
                        topBorder = ' ' + '_'.repeat(w+2) + ' ' + '\n' + `|${' '.repeat(w+2)}|`;
                        panel += topBorder + '\n';
                    }
                    // content
                    panel += sContent.join('\n');
                    // bottom border?
                    if (idx == section.length-1 || sType == 'TEXTBOX') {
                        bottomBorder = '\n'+`|${'_'.repeat(w+2)}|`;
                        panel += bottomBorder ;
                    }
                    panel += '\n';
                }
                return panel;
            }

            function main() {
                const $ = document;
                const chpSelect = $.getElementById('chp');
                const ljson = $.getElementsByClassName('ljson');
                const output = $.getElementById('output');
                const onpage = $.getElementById('onpage');
                onpage.checked = true;
                window.rev = false;

                // find stories
                const numLen = (ljson.length - 1).toString().length;
                for (let idx = 0; idx < ljson.length; idx++) {
                    const opt = $.createElement('option');
                    const j = JSON.parse((ljson[idx]).value);
                    (ljson[idx]).dataset.title = j.META.TITLE;
                    opt.textContent = `${idx.toString().padStart(numLen, '0')}) ` + (ljson[idx]).dataset.title;
                    opt.value = j.META.TITLE;//(ljson[idx]).dataset.title;
                    opt.title = j.META.SUMMARY;
                    chpSelect.appendChild(opt);
                }

                // select story
                chpSelect.addEventListener('change', function(ev) {
                    let title = ev.target.value; //console.log(title)
                    output.value = ''; //console.log(ljson.length)
                    
                    for (const story of ljson) {
                        if (story.dataset.title == title) {
                            story.style.display = 'block';
                            output.style.display = 'block'; //console.log(story.value);
                            let scenes = JSON.parse(story.value).SCENE;
                            let panels = [];
                            for (const s in scenes) {
                                let scene = scenes[s];
                                if (window.rev) {
                                    panels.unshift(makePanel(scene)); // reverse order
                                }
                                else {
                                    panels.push(makePanel(scene));
                                }
                            }
                            for (const p of panels) {
                                if (!onpage.checked) {
                                    console.log(p);
                                }
                                else {
                                    output.value += p + "\n";
                                }
                            }
                            if (onpage.checked) {
                                if (window.rev) {
                                    output.scrollTop = output.scrollHeight;
                                    window.scrollTo(0, $.body.scrollHeight);
                                }
                                else {
                                    output.scrollTop = 0;
                                    window.scrollTo(0, 0);
                                }
                            }
                            if (!onpage.checked) output.value = 'Console';
                        }
                        else {
                            story.style.display = 'none';
                        }
                    }
                });

            }

            window.onload = main();
        </script>
    </body>
</html>